<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito - Mi Tienda</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    /* Navbar personalizado */
    .custom-navbar {
      background: #3b5d50 !important;
      padding-top: 20px;
      padding-bottom: 20px;
    }
    .custom-navbar .navbar-brand { font-size: 32px; font-weight: 600; }
    .custom-navbar .navbar-brand > span { opacity: .4; }
    .custom-navbar .navbar-toggler { border-color: transparent; }
    .custom-navbar .navbar-toggler:active, .custom-navbar .navbar-toggler:focus { box-shadow: none; outline: none; }
    @media (min-width: 992px) { .custom-navbar .custom-navbar-nav li { margin-left: 15px; margin-right: 15px; } }
    .custom-navbar .custom-navbar-nav li a {
      font-weight: 500; color: #ffffff !important; opacity: .8; transition: .3s all ease; position: relative;
    }
    @media (min-width: 768px) {
      .custom-navbar .custom-navbar-nav li a:before {
        content: "";
        position: absolute; bottom: 0; left: 8px; right: 8px; background: #f9bf29; height: 5px; opacity: 1; width: 0; transition: .15s all ease-out;
      }
    }
    .custom-navbar .custom-navbar-nav li a:hover { opacity: 1; }
    .custom-navbar .custom-navbar-nav li a:hover:before { width: calc(100% - 16px); }
    .custom-navbar .custom-navbar-nav li.active a { opacity: 1; }
    .custom-navbar .custom-navbar-nav li.active a:before { width: calc(100% - 16px); }
    .custom-navbar .custom-navbar-cta { margin-left: 0 !important; flex-direction: row; }
    @media (min-width: 768px) { .custom-navbar .custom-navbar-cta { margin-left: 40px !important; } }
    .custom-navbar .custom-navbar-cta li { margin-left: 0px; margin-right: 0px; }
    .custom-navbar .custom-navbar-cta li:first-child { margin-right: 20px; }

    /* Carrito */
    .product-thumbnail img { max-width: 80px; height: auto; }
    .btn-remove { background-color: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; }
    .btn-remove:hover { background-color: #b02a37; }
    .btn-clear { background-color: #6c757d; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
    .btn-clear:hover { background-color: #5a6268; }
    tfoot th { font-size: 1.1rem; }

.footer-section {
  padding: 80px 0;
  background: #ffffff; }
  .footer-section .relative {
    position: relative; }
  .footer-section a {
    text-decoration: none;
    color: #2f2f2f;
    -webkit-transition: .3s all ease;
    -o-transition: .3s all ease;
    transition: .3s all ease; }
    .footer-section a:hover {
      color: rgba(47, 47, 47, 0.5); }
  .footer-section .subscription-form {
    margin-bottom: 40px;
    position: relative;
    z-index: 2;
    margin-top: 100px; }
    @media (min-width: 992px) {
      .footer-section .subscription-form {
        margin-top: 0px;
        margin-bottom: 80px; } }
    .footer-section .subscription-form h3 {
      font-size: 18px;
      font-weight: 500;
      color: #3b5d50; }
    .footer-section .subscription-form .form-control {
      height: 50px;
      border-radius: 10px;
      font-family: "Inter", sans-serif; }
      .footer-section .subscription-form .form-control:active, .footer-section .subscription-form .form-control:focus {
        outline: none;
        -webkit-box-shadow: none;
        box-shadow: none;
        border-color: #3b5d50;
        -webkit-box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);
        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2); }
      .footer-section .subscription-form .form-control::-webkit-input-placeholder {
        font-size: 14px; }
      .footer-section .subscription-form .form-control::-moz-placeholder {
        font-size: 14px; }
      .footer-section .subscription-form .form-control:-ms-input-placeholder {
        font-size: 14px; }
      .footer-section .subscription-form .form-control:-moz-placeholder {
        font-size: 14px; }
    .footer-section .subscription-form .btn {
      border-radius: 10px !important; }
  .footer-section .sofa-img {
    position: absolute;
    top: -200px;
    z-index: 1;
    right: 0; }
    .footer-section .sofa-img img {
      max-width: 380px; }
  .footer-section .links-wrap {
    margin-top: 0px; }
    @media (min-width: 992px) {
      .footer-section .links-wrap {
        margin-top: 54px; } }
    .footer-section .links-wrap ul li {
      margin-bottom: 10px; }
  .footer-section .footer-logo-wrap .footer-logo {
    font-size: 32px;
    font-weight: 500;
    text-decoration: none;
    color: #3b5d50; }
  .footer-section .custom-social li {
    margin: 2px;
    display: inline-block; }
    .footer-section .custom-social li a {
      width: 40px;
      height: 40px;
      text-align: center;
      line-height: 40px;
      display: inline-block;
      background: #dce5e4;
      color: #3b5d50;
      border-radius: 50%; }
      .footer-section .custom-social li a:hover {
        background: #3b5d50;
        color: #ffffff; }
  .footer-section .border-top {
    border-color: #dce5e4; }
    .footer-section .border-top.copyright {
      font-size: 14px !important; }

  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="custom-navbar navbar navbar-expand-md navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">Coding Tool<span>.</span></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarsFurni">
        <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
          <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
          <li class="nav-item active"><a class="nav-link" href="shop.html">Funcionalidades</a></li>
          <li><a class="nav-link" href="about.html">¿Quiénes somos?</a></li>
          <li><a class="nav-link" href="services.html">Soluciones</a></li>
          <li><a class="nav-link" href="blog.html">Casos de éxito</a></li>
          <li><a class="nav-link" href="contact.html">Contáctanos</a></li>
        </ul>
        <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
          <li><a class="nav-link" href="#"><img src="images/user.svg" alt="Usuario" /></a></li>
          <li>
            <a class="nav-link" href="cart.html" style="position: relative;">
              <img src="images/cart.svg" alt="Cotizador" />
              <span id="cart-count-badge" style="position:absolute;top:-5px;right:-5px;background:red;color:white;border-radius:50%;padding:2px 6px;font-size:12px;"></span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Carrito -->
  <section class="container my-5">
    <h1 class="mb-4">Tu Carrito de Compras</h1>
    <div class="table-responsive">
      <table class="table table-bordered align-middle">
        <thead class="table-light">
          <tr>
            <th>Producto</th>
            <th>Precio unitario</th>
            <th>Cantidad</th>
            <th>Subtotal</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody id="cart-items"></tbody>
        <tfoot>
          <tr>
            <th colspan="3" class="text-end">Total:</th>
            <th id="cart-total">$0</th>
            <th><button id="clear-cart" class="btn-clear">Vaciar carrito</button></th>
          </tr>
        </tfoot>
      </table>
    </div>
    <a href="shop.html" class="btn btn-secondary mt-3">Seguir comprando</a>
   <button id="checkout-btn" class="btn btn-primary mt-3">Proceder al pago</button>

  </section>

<!-- Start Footer Section -->
<footer class="footer-section">
	<div class="container relative">

		<div class="sofa-img">
			<img src="images/sofa.png" alt="Image" class="img-fluid">
		</div>

		<div class="row">
			<div class="col-lg-8">
				<div class="subscription-form">
					<h3 class="d-flex align-items-center">
						<span class="me-1">
							<img src="images/envelope-outline.svg" alt="Image" class="img-fluid">
						</span>
						<span>Suscríbete a nuestro boletín</span>
					</h3>

					<form action="#" class="row g-3">
						<div class="col-auto">
							<input type="text" class="form-control" placeholder="Tu nombre">
						</div>
						<div class="col-auto">
							<input type="email" class="form-control" placeholder="Tu correo electrónico">
						</div>
						<div class="col-auto">
							<button class="btn btn-primary">
								<span class="fa fa-paper-plane"></span>
							</button>
						</div>
					</form>

				</div>
			</div>
		</div>

		<div class="row g-5 mb-5">
			<div class="col-lg-4">
				<div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Coding Tool<span>.</span></a></div>
				<p class="mb-4">Desarrollamos páginas web y aplicaciones totalmente personalizadas, basadas en las funcionalidades que tú eliges. Tu proyecto, a tu medida, con nuestro respaldo técnico.</p>

				<ul class="list-unstyled custom-social">
					<li><a href="#"><span class="fa fa-brands fa-facebook-f"></span></a></li>
					<li><a href="#"><span class="fa fa-brands fa-twitter"></span></a></li>
					<li><a href="#"><span class="fa fa-brands fa-instagram"></span></a></li>
					<li><a href="#"><span class="fa fa-brands fa-linkedin"></span></a></li>
				</ul>
			</div>

			<div class="col-lg-8">
				<div class="row links-wrap">
					<div class="col-6 col-sm-6 col-md-3">
						<ul class="list-unstyled">
							<li><a href="#">Quiénes somos</a></li>
							<li><a href="#">Servicios</a></li>
							<li><a href="#">Proyectos</a></li>
							<li><a href="#">Contáctanos</a></li>
						</ul>
					</div>

					<div class="col-6 col-sm-6 col-md-3">
						<ul class="list-unstyled">
							<li><a href="#">Soporte</a></li>
							<li><a href="#">Base de conocimientos</a></li>
							<li><a href="#">Chat en vivo</a></li>
						</ul>
					</div>

					<div class="col-6 col-sm-6 col-md-3">
						<ul class="list-unstyled">
							<li><a href="#">Trabaja con nosotros</a></li>
							<li><a href="#">Nuestro equipo</a></li>
							<li><a href="#">Visión y valores</a></li>
							<li><a href="#">Política de privacidad</a></li>
						</ul>
					</div>

					<div class="col-6 col-sm-6 col-md-3">
						<ul class="list-unstyled">
							<li><a href="#">Web corporativa</a></li>
							<li><a href="#">App para negocios</a></li>
							<li><a href="#">Sistemas personalizados</a></li>
						</ul>
					</div>
				</div>
			</div>

		</div>

		<div class="border-top copyright">
			<div class="row pt-4">
				<div class="col-lg-6">
					<p class="mb-2 text-center text-lg-start">
						&copy;<script>document.write(new Date().getFullYear());</script> Coding Tool. Todos los derechos reservados.
						Diseñado con dedicación por nuestro equipo.
					</p>
				</div>

				<div class="col-lg-6 text-center text-lg-end">
					<ul class="list-unstyled d-inline-flex ms-auto">
						<li class="me-4"><a href="#">Términos y condiciones</a></li>
						<li><a href="#">Política de privacidad</a></li>
					</ul>
				</div>

			</div>
		</div>

	</div>
</footer>
<!-- End Footer Section -->



  <script>
    function updateCartCount() {
      const cart = JSON.parse(sessionStorage.getItem("cart")) || [];
      const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);
      const badge = document.getElementById("cart-count-badge");
      badge.textContent = totalItems;
      badge.style.display = totalItems > 0 ? "inline-block" : "none";
    }

    function renderCart() {
      const cartItemsContainer = document.getElementById("cart-items");
      const cartTotal = document.getElementById("cart-total");
      let cart = JSON.parse(sessionStorage.getItem("cart")) || [];

      cartItemsContainer.innerHTML = "";

      if (cart.length === 0) {
        cartItemsContainer.innerHTML = `<tr><td colspan="5" class="text-center">No hay productos en el carrito.</td></tr>`;
        cartTotal.textContent = "$0";
        updateCartCount();
        return;
      }

      let total = 0;

      cart.forEach(item => {
        const subtotal = item.price * item.quantity;
        total += subtotal;

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>
            <div class="d-flex align-items-center">
              <img src="${item.image}" alt="${item.name}" class="product-thumbnail me-3">
              <span>${item.name}</span>
            </div>
          </td>
          <td>$${item.price.toLocaleString("es-MX")}</td>
          <td>
            <input type="number" min="1" value="${item.quantity}" class="form-control form-control-sm quantity-input" data-id="${item.id}" style="width: 70px;">
          </td>
          <td>$${subtotal.toLocaleString("es-MX")}</td>
          <td>
            <button class="btn-remove" data-id="${item.id}">Eliminar</button>
          </td>
        `;
        cartItemsContainer.appendChild(tr);
      });

      cartTotal.textContent = `$${total.toLocaleString("es-MX")}`;
      updateCartCount();
    }

    document.getElementById("cart-items").addEventListener("click", (e) => {
      if (e.target.classList.contains("btn-remove")) {
        const id = Number(e.target.dataset.id);
        let cart = JSON.parse(sessionStorage.getItem("cart")) || [];
        cart = cart.filter(item => item.id !== id);
        sessionStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
      }
    });

    document.getElementById("cart-items").addEventListener("change", (e) => {
      if (e.target.classList.contains("quantity-input")) {
        const id = Number(e.target.dataset.id);
        const newQty = Number(e.target.value);
        let cart = JSON.parse(sessionStorage.getItem("cart")) || [];
        const item = cart.find(p => p.id === id);
        if (item && newQty > 0) {
          item.quantity = newQty;
          sessionStorage.setItem("cart", JSON.stringify(cart));
          renderCart();
        }
      }
    });

    document.getElementById("clear-cart").addEventListener("click", () => {
      sessionStorage.removeItem("cart");
      renderCart();
    });

    document.addEventListener("DOMContentLoaded", () => {
      renderCart();
    });
	document.getElementById("checkout-btn").addEventListener("click", () => {
  const cart = JSON.parse(sessionStorage.getItem("cart")) || [];
  if(cart.length === 0){
    alert("Tu carrito está vacío");
    return;
  }

  // Guardar carrito en sessionStorage antes de redirigir (opcional)
  sessionStorage.setItem("checkoutCart", JSON.stringify(cart));

  // Redirigir a la página de pago
  window.location.href = "checkout.html"; // aquí pones tu página de pago
});

  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
