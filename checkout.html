<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="favicon.png">
  <meta name="description" content="" />
  <meta name="keywords" content="bootstrap, bootstrap4" />

  <!-- Bootstrap CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="css/tiny-slider.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <title>Coding Tool - Checkout</title>
</head>

<body>

<!-- Start Header/Navigation -->
<nav class="custom-navbar navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="index.html">Coding Tool<span>.</span></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarsFurni">
      <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
        <li class="nav-item active"><a class="nav-link" href="index.html">Inicio</a></li>
        <li><a class="nav-link" href="shop.html">Funcionalidades</a></li>
        <li><a class="nav-link" href="about.html">¿Quiénes somos?</a></li>
        <li><a class="nav-link" href="services.html">Soluciones</a></li>
        <li><a class="nav-link" href="blog.html">Casos de éxito</a></li>
        <li><a class="nav-link" href="contact.html">Contáctanos</a></li>
      </ul>
      <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
        <li><a class="nav-link" href="#"><img src="images/user.svg" alt="Usuario"></a></li>
        <li><a class="nav-link" href="cart.html"><img src="images/cart.svg" alt="Cotizador"></a></li>
      </ul>
    </div>
  </div>
</nav>
<!-- End Header/Navigation -->

<!-- Hero Section -->
<div class="hero">
  <div class="container">
    <div class="row justify-content-between">
      <div class="col-lg-5">
        <div class="intro-excerpt">
          <h1>Checkout</h1>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="untree_co-section">
  <div class="container">

    <div class="row mb-5">
      <div class="col-md-12">
        <div class="border p-4 rounded">
          Returning customer? <a href="#">Click here</a> to login
        </div>
      </div>
    </div>

    <div class="row">

      <!-- Billing Details -->
      <div class="col-md-6 mb-5 mb-md-0">
        <h2 class="h3 mb-3 text-black">Billing Details</h2>
        <div class="p-3 p-lg-5 border bg-white">
          <div class="form-group">
            <label for="c_country" class="text-black">Country <span class="text-danger">*</span></label>
            <select id="c_country" class="form-control">
              <option value="">Select a country</option>
              <option>Bangladesh</option>
              <option>Algeria</option>
              <option>Afghanistan</option>
              <option>Ghana</option>
              <option>Albania</option>
              <option>Bahrain</option>
              <option>Colombia</option>
              <option>Dominican Republic</option>
            </select>
          </div>
          <div class="form-group row">
            <div class="col-md-6">
              <label for="c_fname" class="text-black">First Name <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="c_fname">
            </div>
            <div class="col-md-6">
              <label for="c_lname" class="text-black">Last Name <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="c_lname">
            </div>
          </div>
          <div class="form-group row">
            <div class="col-md-12">
              <label for="c_companyname" class="text-black">Company Name</label>
              <input type="text" class="form-control" id="c_companyname">
            </div>
          </div>
          <div class="form-group row">
            <div class="col-md-12">
              <label for="c_address" class="text-black">Address <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="c_address" placeholder="Street address">
            </div>
          </div>
          <div class="form-group mt-3">
            <input type="text" class="form-control" placeholder="Apartment, suite, unit etc. (optional)">
          </div>
          <div class="form-group row">
            <div class="col-md-6">
              <label for="c_state_country" class="text-black">State / Country <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="c_state_country">
            </div>
            <div class="col-md-6">
              <label for="c_postal_zip" class="text-black">Postal / Zip <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="c_postal_zip">
            </div>
          </div>
          <div class="form-group row mb-5">
            <div class="col-md-6">
              <label for="c_email_address" class="text-black">Email Address <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="c_email_address">
            </div>
            <div class="col-md-6">
              <label for="c_phone" class="text-black">Phone <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="c_phone" placeholder="Phone Number">
            </div>
          </div>
          <div class="form-group">
            <label for="c_order_notes" class="text-black">Order Notes</label>
            <textarea id="c_order_notes" cols="30" rows="5" class="form-control" placeholder="Write your notes here..."></textarea>
          </div>
        </div>
      </div>

      <!-- Right Column -->
      <div class="col-md-6">

        <!-- Coupon -->
        <div class="row mb-5">
          <div class="col-md-12">
            <h2 class="h3 mb-3 text-black">Coupon Code</h2>
            <div class="p-3 p-lg-5 border bg-white">
              <label for="c_code" class="text-black mb-3">Enter your coupon code if you have one</label>
              <div class="input-group w-75 couponcode-wrap">
                <input type="text" class="form-control me-2" id="c_code" placeholder="Coupon Code">
                <button class="btn btn-black btn-sm" type="button" id="button-addon2">Apply</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Your Order -->
        <div class="row mb-5">
          <div class="col-md-12">
            <h2 class="h3 mb-3 text-black">Your Order</h2>
            <div class="p-3 p-lg-5 border bg-white">
              <table class="table site-block-order-table mb-5">
                <thead>
                  <th>Product</th>
                  <th>Total</th>
                </thead>
                <tbody>
                  <!-- JS will render items here -->
                </tbody>
              </table>

              <div class="form-group">
                <button id="placeOrderBtn" class="btn btn-black btn-lg py-3 btn-block">Place Order</button>
              </div>

            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="footer-section">
  <div class="container relative">
    <div class="row g-5 mb-5">
      <div class="col-lg-4">
        <div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Coding Tool<span>.</span></a></div>
        <p class="mb-4">Desarrollamos páginas web y aplicaciones totalmente personalizadas, basadas en las funcionalidades que tú eliges.</p>
      </div>
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/tiny-slider.js"></script>
<script src="js/custom.js"></script>

<script>
// ===== Variables principales =====
const applyCouponBtn = document.getElementById('button-addon2');
const couponInput = document.getElementById('c_code');
const placeOrderBtn = document.getElementById('placeOrderBtn');
const orderTable = document.querySelector('.site-block-order-table tbody');

// Carrito de ejemplo
let cart = [
  { name: 'Top Up T-Shirt', qty: 1, price: 250 },
  { name: 'Polo Shirt', qty: 1, price: 100 }
];
let discount = 0;

// ===== Renderizar carrito =====
function renderCart() {
  orderTable.innerHTML = '';
  let subtotal = 0;
  cart.forEach(item => {
    const totalItem = item.price * item.qty;
    subtotal += totalItem;
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${item.name} <strong class="mx-2">x</strong> ${item.qty}</td>
                    <td>$${totalItem.toFixed(2)}</td>`;
    orderTable.appendChild(tr);
  });

  const trSubtotal = document.createElement('tr');
  trSubtotal.innerHTML = `<td class="text-black font-weight-bold"><strong>Cart Subtotal</strong></td>
                          <td class="text-black">$${subtotal.toFixed(2)}</td>`;
  orderTable.appendChild(trSubtotal);

  const total = subtotal - discount;
  const trTotal = document.createElement('tr');
  trTotal.innerHTML = `<td class="text-black font-weight-bold"><strong>Order Total</strong></td>
                       <td class="text-black font-weight-bold"><strong>$${total.toFixed(2)}</strong></td>`;
  orderTable.appendChild(trTotal);
}

// ===== Aplicar cupón =====
applyCouponBtn.addEventListener('click', () => {
  const code = couponInput.value.trim();
  if(code === 'DISCOUNT10') {
    discount = 10;
    alert('Cupón aplicado: $10 de descuento');
  } else if(code === '') {
    alert('Ingrese un código de cupón');
    return;
  } else {
    alert('Cupón inválido');
    discount = 0;
  }
  renderCart();
});

// ===== Validar formulario =====
function validateForm() {
  const requiredFields = [
    'c_country','c_fname','c_lname','c_address',
    'c_state_country','c_postal_zip','c_email_address','c_phone'
  ];

  for(let id of requiredFields){
    const field = document.getElementById(id);
    if(!field.value.trim()){
      alert(`Por favor completa el campo: ${field.previousElementSibling.innerText}`);
      field.focus();
      return false;
    }
  }

  // Validación de correo
  const emailField = document.getElementById('c_email_address');
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if(!emailRegex.test(emailField.value.trim())){
    alert('Ingrese un correo válido');
    emailField.focus();
    return false;
  }

  return true;
}

// ===== Enviar pedido =====
placeOrderBtn.addEventListener('click', () => {
  if(!validateForm()) return;

  const orderData = {
    billing: {
      country: document.getElementById('c_country').value,
      firstName: document.getElementById('c_fname').value,
      lastName: document.getElementById('c_lname').value,
      company: document.getElementById('c_companyname').value,
      address: document.getElementById('c_address').value,
      state: document.getElementById('c_state_country').value,
      postal: document.getElementById('c_postal_zip').value,
      email: document.getElementById('c_email_address').value,
      phone: document.getElementById('c_phone').value
    },
    order: cart,
    discount: discount,
    total: cart.reduce((acc,i)=> acc + i.price*i.qty,0)-discount,
    notes: document.getElementById('c_order_notes').value
  };

  console.log('Pedido enviado:', orderData);
  alert('¡Gracias! Tu pedido ha sido procesado correctamente.');
  window.location.href = 'thankyou.html';
});

// Inicializar
renderCart();
</script>

</body>
</html>
